{% assign news_by_year = site.news | sort: "date" | reverse | slice: 0, include.limit | group_by_exp: "item", "item.date | date: '%Y'" -%}

<div class="my-3 bg-white shadow-sm rounded-sm">
    <h6 class="p-3 mb-0 border-bottom border-gray d-flex align-items-center">
        <span>ğŸ”¥ News</span>
        {% if site.news and site.news.size > 0 %}
        <span class="ml-auto text-muted small">Latest {{ include.limit | default: site.news.size }}</span>
        {% endif %}
    </h6>

    <!-- å¯æ»šåŠ¨åŒºåŸŸå¤–å£³ -->
    <div class="px-3 pb-2">
        <div class="news-scroll-window">
            {% assign not_first = false %}
            {% for year in news_by_year %}
            <div class="media py-2 {% if not_first %}border-top border-light{% endif %}">
                {% assign not_first = true %}
                <!-- å¹´ä»½æ ‡ç­¾ -->
                <div class="mr-3 my-1">
                    <span class="badge badge-light border text-muted small px-2 py-1">
                        {{ year.name }}
                    </span>
                </div>

                <!-- è¯¥å¹´çš„æ‰€æœ‰ news -->
                <div class="media-body">
                    {% for item in year.items %}
                    <div class="my-1 d-flex align-items-baseline news-item-row">
                        <div class="news-item-dot"></div>
                        <div class="flex-grow-1">
                            <div class="news-item-title">
                                {{ item.title }}
                            </div>
                        </div>
                        <div class="ml-2 mt-auto text-muted no-break news-item-date">
                            <i>{{ item.date | date: "%b %d" }}</i>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
/* ===== News æ»šåŠ¨çª—å£æ ·å¼ ===== */
.news-scroll-window {
    max-height: 230px;          /* æ§åˆ¶å¯è§†é«˜åº¦ï¼ŒæŒ‰éœ€è¦è°ƒï¼Œæ¯”å¦‚ 200~280 éƒ½å¯ä»¥ */
    overflow-y: auto;
    padding-right: 4px;         /* ç»™æ»šåŠ¨æ¡ç•™ä¸€ç‚¹ç©ºé—´ */
}

/* å¹´ä»½ä¸‹æ¯ä¸€æ¡ news çš„å°åœ†ç‚¹ */
.news-item-row {
    position: relative;
    padding-left: 0.75rem;
}

.news-item-dot {
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background-color: #ced4da;
    margin-right: 0.4rem;
    flex-shrink: 0;
}

/* æ ‡é¢˜å’Œæ—¥æœŸçš„ç»†èŠ‚ */
.news-item-title {
    font-size: 0.9rem;
    line-height: 1.35;
}

.news-item-date {
    font-size: 0.8rem;
}

/* å°å±å¹•æ—¶ç¨å¾®ç´§å‡‘ä¸€ç‚¹ */
@media (max-width: 576px) {
    .news-scroll-window {
        max-height: 200px;
    }
    .news-item-title {
        font-size: 0.85rem;
    }
    .news-item-date {
        font-size: 0.75rem;
    }
}

/* è‡ªå®šä¹‰ä¸€ä¸‹æ»šåŠ¨æ¡ï¼ˆåªå¯¹æ”¯æŒ webkit çš„æµè§ˆå™¨æœ‰æ•ˆï¼Œåˆ«çš„æµè§ˆå™¨ä¼šé€€åŒ–ä¸ºé»˜è®¤æ»šåŠ¨æ¡ï¼‰ */
.news-scroll-window::-webkit-scrollbar {
    width: 6px;
}
.news-scroll-window::-webkit-scrollbar-track {
    background: transparent;
}
.news-scroll-window::-webkit-scrollbar-thumb {
    background-color: #dee2e6;
    border-radius: 999px;
}
.news-scroll-window::-webkit-scrollbar-thumb:hover {
    background-color: #ced4da;
}
</style>
